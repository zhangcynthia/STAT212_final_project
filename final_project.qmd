---
title: "Public Transportation Accessibility in Twin Cities"
author: "Tina Chen, Shirley Jiang, Cynthia Zhang"
format: html
editor: visual
---

```{r load data}
library(dplyr)
library(tidyverse)
library(tidycensus)
library(ggplot2)
library(sf)

rider_23 <- read.csv("data/ridership_2023.csv")
rider_19 <- read.csv("data/ridership_2019.csv")
rider_covid <- read.csv("data/ridership_covid.csv")
stops <- read.csv("data/stops.csv")
```

```{r data cleaning}
date <- c("dtBookingStart", "dtWeekStart", "dtDate", "dtMonthYear")
rider_23 <- rider_23 %>% mutate(across(all_of(date), as.Date))
rider_19 <- rider_19 %>% mutate(across(all_of(date), as.Date))
rider_covid <- rider_covid %>% mutate(across(all_of(date), as.Date))
stops_sf <- st_as_sf(stops, coords = c("lon", "lat"), crs = 4269)
```

```{r}
# get population and median Income for Ramsey and Hennepin area
census2023 <- tidycensus::get_acs(
    year = 2022,
    state = "MN",
    geography = "tract",
    variables = c("B01003_001", "B19013_001"),
    output = "wide",
    geometry = TRUE
) %>%
    filter(word(NAME, 4) %in% c("Ramsey", "Hennepin")) %>%
    mutate(
        tract = word(NAME, 3),
        tract = str_remove(tract, ","),
        county = word(NAME, 4)
    ) %>%
    select(-NAME) %>%
    rename(
        "population" = "B01003_001E",
        "medianIncome" = "B19013_001E"
    ) %>%
    select(-contains("_"))
```


```{r}

```

